{% extends "layout.html" %}
{% from "forms.html" import csrf_token %}
{% block head %}
{{ super() }}
{% endblock %}
{% block nav %}
<div class="drawer mdl-layout__drawer mdl-color--blue-grey-900 mdl-color-text--blue-grey-50">
  <header class="drawer-header">
    <div class="avatar-dropdown">
      <span>{{ email }}</span>
    </div>
  </header>
  <nav class="navigation mdl-navigation mdl-color--blue-grey-800">
    <a class="mdl-navigation__link" href="{{ url_for('landing_page') }}"><i class="mdl-color-text--blue-grey-400 material-icons" role="presentation">home</i>Home</a>
    <a class="mdl-navigation__link" href="{{ url_for('add_page') }}"><i class="mdl-color-text--blue-grey-400 material-icons" role="presentation">add</i>Add Class</a>
    <a class="mdl-navigation__link" href="{{ url_for('logout') }}"><i class="mdl-color-text--blue-grey-400 material-icons" role="presentation">exit_to_app</i>Log out</a>
  </nav>
</div>
{% endblock %}
{% block body %}
{{ csrf_token() }}
<div class="content">
  <div class="cards mdl-grid">
    <div class="mdl-layout-spacer"></div>
    <div style="overflow: auto" id="login" class="mdl-card mdl-cell mdl-cell--11-col mdl-shadow--2dp mdl-cell">
      <div class="mdl-card__title mdl-color--orange">
        <h2 class="mdl-card__title-text">All Accounts</h2>
      </div>
      <table style="overflow: auto" class="mdl-data-table mdl-js-data-table mdl-shadow--2dp">
        <thead>
          <tr>
            <th class="mdl-data-table__cell--non-numeric">Email</th>
            <th class="mdl-data-table__cell--non-numeric">UUID</th>
            <th>Role</th>
            <th>Phone</th>
            <th>Terminate</th>
          </tr>
        </thead>
        <tbody>
          {% for user in get_all_users() %}
          <tr>
            <td class="mdl-data-table__cell--non-numeric"><strong>
              {% if user.email == "" %} 
              Unclaimed UUID
              {% else %} 
              {{user.email }}
              {% endif %}
            </strong></td>
            <td class="mdl-data-table__cell--non-numeric">{{ user.uuid }}</td>
            <td>{{ user.role }}</td>
            <td>{{ user.phone }}</td>
            <td>
              <span onclick="post('{{ url_for('delete_uuid') }}', {'delete-uuid': '{{user.uuid}}'})" class="listing-action mdl-button mdl-js-button mdl-button--colored">
                Terminate
              </span>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
    <div class="mdl-layout-spacer"></div>
  </div>
</div>
{% endblock %}